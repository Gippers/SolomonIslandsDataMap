<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Functions that load the data for the map.">

<title>Load Data – SolomonIslandsDataMap</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-000f0825b9c55ed21d14970d810c14a9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Load Data – SolomonIslandsDataMap">
<meta property="og:description" content="Functions that load the data for the map.">
<meta property="og:site_name" content="SolomonIslandsDataMap">
<meta name="twitter:title" content="Load Data – SolomonIslandsDataMap">
<meta name="twitter:description" content="Functions that load the data for the map.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SolomonIslandsDataMap</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Gippers"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.thomasmartin.id.au"> <i class="bi bi-globe" role="img" aria-label="Personal Website">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./load_data.html">Load Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solomon Islands Data Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./load_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Load Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dash_components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generate Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">App Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./map_page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Map Page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./map_population.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Map Page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./election_page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Election Page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./table_page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Table Page</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generate Map</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#solomon-geospatial-data" id="toc-solomon-geospatial-data" class="nav-link active" data-scroll-target="#solomon-geospatial-data">Solomon Geospatial Data</a>
  <ul class="collapse">
  <li><a href="#census-data" id="toc-census-data" class="nav-link" data-scroll-target="#census-data">Census Data</a></li>
  <li><a href="#test-that-the-.env-variables-exist" id="toc-test-that-the-.env-variables-exist" class="nav-link" data-scroll-target="#test-that-the-.env-variables-exist">Test that the .env variables exist</a></li>
  </ul></li>
  <li><a href="#function-for-connecting-to-aws-s3-client" id="toc-function-for-connecting-to-aws-s3-client" class="nav-link" data-scroll-target="#function-for-connecting-to-aws-s3-client">Function for connecting to AWS S3 client</a></li>
  <li><a href="#load-and-prepare-elections-data" id="toc-load-and-prepare-elections-data" class="nav-link" data-scroll-target="#load-and-prepare-elections-data">Load and Prepare Elections Data</a></li>
  <li><a href="#solomongeo-data-class" id="toc-solomongeo-data-class" class="nav-link" data-scroll-target="#solomongeo-data-class">SolomonGeo Data Class</a>
  <ul class="collapse">
  <li><a href="#constructors-for-solomongeo-class" id="toc-constructors-for-solomongeo-class" class="nav-link" data-scroll-target="#constructors-for-solomongeo-class">Constructors for SolomonGeo class</a>
  <ul class="collapse">
  <li><a href="#solomongeo.load_pickle" id="toc-solomongeo.load_pickle" class="nav-link" data-scroll-target="#solomongeo.load_pickle">SolomonGeo.load_pickle</a></li>
  </ul></li>
  <li><a href="#test-that-dataset-and-geography-merge-perfectly" id="toc-test-that-dataset-and-geography-merge-perfectly" class="nav-link" data-scroll-target="#test-that-dataset-and-geography-merge-perfectly">Test that dataset and geography merge perfectly</a></li>
  <li><a href="#save-solomongeo" id="toc-save-solomongeo" class="nav-link" data-scroll-target="#save-solomongeo">Save SolomonGeo</a>
  <ul class="collapse">
  <li><a href="#solomongeo.save_pickle" id="toc-solomongeo.save_pickle" class="nav-link" data-scroll-target="#solomongeo.save_pickle">SolomonGeo.save_pickle</a></li>
  <li><a href="#solomongeo.save_pickle-1" id="toc-solomongeo.save_pickle-1" class="nav-link" data-scroll-target="#solomongeo.save_pickle-1">SolomonGeo.save_pickle</a></li>
  </ul></li>
  <li><a href="#get-geo-json" id="toc-get-geo-json" class="nav-link" data-scroll-target="#get-geo-json">Get Geo JSON</a>
  <ul class="collapse">
  <li><a href="#solomongeo.get_geojson" id="toc-solomongeo.get_geojson" class="nav-link" data-scroll-target="#solomongeo.get_geojson">SolomonGeo.get_geojson</a></li>
  </ul></li>
  <li><a href="#store-json" id="toc-store-json" class="nav-link" data-scroll-target="#store-json">Store JSON</a>
  <ul class="collapse">
  <li><a href="#solomongeo.get_store" id="toc-solomongeo.get_store" class="nav-link" data-scroll-target="#solomongeo.get_store">SolomonGeo.get_store</a></li>
  </ul></li>
  <li><a href="#get-census-data" id="toc-get-census-data" class="nav-link" data-scroll-target="#get-census-data">Get Census Data</a>
  <ul class="collapse">
  <li><a href="#solomongeo.get_census" id="toc-solomongeo.get_census" class="nav-link" data-scroll-target="#solomongeo.get_census">SolomonGeo.get_census</a></li>
  </ul></li>
  <li><a href="#get-population-data" id="toc-get-population-data" class="nav-link" data-scroll-target="#get-population-data">Get Population Data</a>
  <ul class="collapse">
  <li><a href="#solomongeo.get_pop" id="toc-solomongeo.get_pop" class="nav-link" data-scroll-target="#solomongeo.get_pop">SolomonGeo.get_pop</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#testing" id="toc-testing" class="nav-link" data-scroll-target="#testing">Testing</a>
  <ul class="collapse">
  <li><a href="#save-and-load" id="toc-save-and-load" class="nav-link" data-scroll-target="#save-and-load">Save and Load</a></li>
  </ul></li>
  <li><a href="#todo-check-that-all-proportions-are-less-than-0" id="toc-todo-check-that-all-proportions-are-less-than-0" class="nav-link" data-scroll-target="#todo-check-that-all-proportions-are-less-than-0">TODO check that all proportions are less than 0</a>
  <ul class="collapse">
  <li><a href="#testing-of-population-getter" id="toc-testing-of-population-getter" class="nav-link" data-scroll-target="#testing-of-population-getter">Testing of Population Getter</a></li>
  <li><a href="#check-some-of-the-datasets" id="toc-check-some-of-the-datasets" class="nav-link" data-scroll-target="#check-some-of-the-datasets">Check Some of the datasets</a>
  <ul class="collapse">
  <li><a href="#test-that-the-election-data-exists" id="toc-test-that-the-election-data-exists" class="nav-link" data-scroll-target="#test-that-the-election-data-exists">Test that the election data Exists</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/Gippers/SolomonIslandsDataMap/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Load Data</h1>
</div>

<div>
  <div class="description">
    Functions that load the data for the map.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p><strong>Contents</strong></p>
<p><code>Solomon Geospatial Data</code> - <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo"><code>SolomonGeo</code></a>: A class that cleans the solomon islandas census and geography data - <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo.read_test"><code>SolomonGeo.read_test</code></a>: Loads and transforms the test data - <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo.get_geojson"><code>SolomonGeo.get_geojson</code></a>: Returns the geo_df as a geojson datatset</p>
<section id="solomon-geospatial-data" class="level2">
<h2 class="anchored" data-anchor-id="solomon-geospatial-data">Solomon Geospatial Data</h2>
<blockquote class="blockquote">
<p>Load the geography and census data ### Geography Data Solomons islands geography data is organised at the levels - adm0 - The country as as whole, Solomon Islands - adm1 - Also referred to as the province e.g.&nbsp;Honiara, Malaita - adm2 - The Consituency e.g.&nbsp;Central Honiara - adm3 - Ward, the smallest geography I am reporting. E.g. Cruz</p>
</blockquote>
<section id="census-data" class="level3">
<h3 class="anchored" data-anchor-id="census-data">Census Data</h3>
<p>Solomon islands census data has been used from the 2009 and 2019 census. For the respective census: 2009 - We have the total population in for each of the administration regions 2019 - There is only data available down to the province level</p>
</section>
<section id="test-that-the-.env-variables-exist" class="level3">
<h3 class="anchored" data-anchor-id="test-that-the-.env-variables-exist">Test that the .env variables exist</h3>
<div id="cell-5" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test that the environment variables can be loaded</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>test(ACCESS_KEY, <span class="va">None</span>, nequals)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>test(SECRET_ACCCESS_KEY, <span class="va">None</span>, nequals)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>test(REGION_NAME, <span class="va">None</span>, nequals)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>test_eq(REGION_NAME, <span class="st">'ap-southeast-2'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="function-for-connecting-to-aws-s3-client" class="level2">
<h2 class="anchored" data-anchor-id="function-for-connecting-to-aws-s3-client">Function for connecting to AWS S3 client</h2>
</section>
<section id="load-and-prepare-elections-data" class="level2">
<h2 class="anchored" data-anchor-id="load-and-prepare-elections-data">Load and Prepare Elections Data</h2>
<p>Load and manipulate the elections data. Below data will be manipulated in <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo.__clean_elections"><code>SolomonGeo.__clean_elections</code></a> function.</p>
<div id="cell-8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>elec <span class="op">=</span> pd.read_csv(fp <span class="op">+</span> <span class="st">'Solomon_Elections_Data_April_2024.csv'</span>, thousands<span class="op">=</span><span class="st">','</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#elec['Party'] = </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>candParty <span class="op">=</span> elec[<span class="st">'Candidate'</span>].<span class="bu">str</span>.split(<span class="st">"("</span>, expand <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>elec[<span class="st">'candParty'</span>] <span class="op">=</span> elec[<span class="st">'Candidate'</span>]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>elec[<span class="st">'Candidate'</span>] <span class="op">=</span> candParty.loc[:, <span class="dv">0</span>]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>elec[<span class="st">'Party'</span>] <span class="op">=</span> candParty.loc[:, <span class="dv">1</span>].<span class="bu">str</span>.strip(<span class="st">")"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix formatting</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#elec.Total.astype(int)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>elec.sort_values(by <span class="op">=</span> [<span class="st">'Type'</span>,<span class="st">'Year'</span>, <span class="st">'Geo'</span>, <span class="st">'loc_name'</span>, <span class="st">'Total'</span>,], inplace <span class="op">=</span> <span class="va">True</span>, ascending<span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>elec[<span class="st">'Order'</span>] <span class="op">=</span> elec.groupby(by <span class="op">=</span> <span class="st">'loc_name'</span>).cumcount()</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>elec.sort_values(by <span class="op">=</span> [<span class="st">'Type'</span>,<span class="st">'Year'</span>, <span class="st">'Geo'</span>, <span class="st">'loc_name'</span>, <span class="st">'Total'</span>,], inplace <span class="op">=</span> <span class="va">True</span>, ascending<span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>elec.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Total</th>
<th data-quarto-table-cell-role="th">Proportion</th>
<th data-quarto-table-cell-role="th">candParty</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Order</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Joseph Waleanisia</td>
<td>108</td>
<td>1.7</td>
<td>Joseph Waleanisia (UP)</td>
<td>UP</td>
<td>4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Obadiah Koti</td>
<td>257</td>
<td>3.9</td>
<td>Obadiah Koti (PLD)</td>
<td>PLD</td>
<td>3</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Talauburi Anisi</td>
<td>488</td>
<td>7.5</td>
<td>Talauburi Anisi (KAD)</td>
<td>KAD</td>
<td>2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>David Filia</td>
<td>1348</td>
<td>20.7</td>
<td>David Filia (OUR)</td>
<td>OUR</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Cooper Wale</td>
<td>4314</td>
<td>66.2</td>
<td>Cooper Wale (SID)</td>
<td>SID</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Make a wide dataset that has the top three finishing candidates per election and electorate.</p>
<div id="cell-10" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>elec_wide <span class="op">=</span> elec.copy()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>elec_wide <span class="op">=</span> elec_wide[elec_wide[<span class="st">'Order'</span>] <span class="op">&lt;=</span> <span class="dv">2</span>]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>elec_wide[<span class="st">'displayValue'</span>] <span class="op">=</span> elec_wide.candParty.<span class="bu">map</span>(<span class="bu">str</span>) <span class="op">+</span> <span class="st">" - "</span> <span class="op">+</span> elec_wide.Total.<span class="bu">map</span>(<span class="bu">str</span>) <span class="op">+</span> <span class="st">" ("</span> <span class="op">+</span> elec_wide.Proportion.<span class="bu">map</span>(<span class="bu">str</span>) <span class="op">+</span> <span class="st">"%)"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>elec_wide <span class="op">=</span> pd.pivot(elec_wide, index <span class="op">=</span> [<span class="st">'Type'</span>, <span class="st">'Year'</span>, <span class="st">'Geo'</span>, <span class="st">'loc_name'</span>,], columns <span class="op">=</span> [<span class="st">'Order'</span>, ], values <span class="op">=</span> [<span class="st">'displayValue'</span>]).fillna(<span class="st">""</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>elec_wide <span class="op">=</span> elec_wide.droplevel(<span class="dv">0</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>elec_wide.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Order</th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">National Parliament</th>
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">2024</th>
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">Constituency</th>
<th data-quarto-table-cell-role="th">Auki-Langalanga</th>
<td>Cooper Wale (SID) - 4314 (66.2%)</td>
<td>David Filia (OUR) - 1348 (20.7%)</td>
<td>Talauburi Anisi (KAD) - 488 (7.5%)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Baegu-Asifola</th>
<td>Tagini Makario (OUR) - 2391 (37.4%)</td>
<td>Celsus Talifilu (U4C) - 2147 (33.6%)</td>
<td>Douglas Buga (SIP) - 1009 (15.8%)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central Guadalcanal</th>
<td>Shanel Agovaka (OUR) - 3454 (43.1%)</td>
<td>Manengelea Rex (IND) - 1592 (19.8%)</td>
<td>Denson Denni (KAD) - 1381 (17.2%)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central Honiara</th>
<td>Darcy Lilo (SIP) - 8223 (63.4%)</td>
<td>Alfred Efona (UP) - 3632 (28.0%)</td>
<td>Francis Idu (OUR) - 669 (5.2%)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central Kwara'ae</th>
<td>Ricky Fuo'o (UP) - 5208 (47.9%)</td>
<td>Jackson Fiulaua (OUR) - 1831 (16.8%)</td>
<td>Young Wate (IND) - 1537 (14.1%)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Find winning candidate in each location and election</p>
<div id="cell-12" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>elec_wide2 <span class="op">=</span> elec.copy().loc[elec.Order <span class="op">==</span> <span class="dv">0</span>, :]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>elec_wide2.set_index([<span class="st">'Type'</span>, <span class="st">'Year'</span>, <span class="st">'Geo'</span>, <span class="st">'loc_name'</span>,], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>elec_wide2.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Total</th>
<th data-quarto-table-cell-role="th">Proportion</th>
<th data-quarto-table-cell-role="th">candParty</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Order</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">National Parliament</th>
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">2024</th>
<th rowspan="5" data-quarto-table-cell-role="th" data-valign="top">Constituency</th>
<th data-quarto-table-cell-role="th">Auki-Langalanga</th>
<td>Cooper Wale</td>
<td>4314</td>
<td>66.2</td>
<td>Cooper Wale (SID)</td>
<td>SID</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Baegu-Asifola</th>
<td>Tagini Makario</td>
<td>2391</td>
<td>37.4</td>
<td>Tagini Makario (OUR)</td>
<td>OUR</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central Guadalcanal</th>
<td>Shanel Agovaka</td>
<td>3454</td>
<td>43.1</td>
<td>Shanel Agovaka (OUR)</td>
<td>OUR</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central Honiara</th>
<td>Darcy Lilo</td>
<td>8223</td>
<td>63.4</td>
<td>Darcy Lilo (SIP)</td>
<td>SIP</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central Kwara'ae</th>
<td>Ricky Fuo'o</td>
<td>5208</td>
<td>47.9</td>
<td>Ricky Fuo'o (UP)</td>
<td>UP</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Merge back together the two datasets</p>
<div id="cell-14" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>elec_wide2 <span class="op">=</span> pd.DataFrame(elec_wide2.Party)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>elec_wide2.rename(columns <span class="op">=</span> {<span class="st">"Party"</span>: <span class="st">"Winning Party"</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>elec_wide <span class="op">=</span> pd.merge(elec_wide, elec_wide2, how <span class="op">=</span> <span class="st">'left'</span>, left_index <span class="op">=</span> <span class="va">True</span>, right_index <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the index</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>elec_wide.reset_index(inplace <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-15" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>elec.Party.unique()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>array(['UP', 'PLD', 'KAD', 'OUR', 'SID', 'IND', 'SIP', 'U4C', 'PAP',
       'PFP', 'DAP', 'NTP', 'GPS'], dtype=object)</code></pre>
</div>
</div>
<p>Make the Proportion column a decimal to be displayed properly</p>
<div id="cell-17" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>elec.Proportion <span class="op">=</span> elec.Proportion <span class="op">/</span> <span class="dv">100</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="solomongeo-data-class" class="level1">
<h1>SolomonGeo Data Class</h1>
<p>This data class manipulates and stores the geospatial and regular data relating to each geography. It includes the necessary data and methods to manipulate that data to build the resulting dash app.</p>
<section id="constructors-for-solomongeo-class" class="level2">
<h2 class="anchored" data-anchor-id="constructors-for-solomongeo-class">Constructors for SolomonGeo class</h2>
<p>These constudctors are used to build the SolomonGeo objects from various inputs</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L192" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.load_pickle" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.load_pickle">SolomonGeo.load_pickle</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.load_pickle (folder:str='/testData/', aws:bool=True,
                         file_name:str='sol_geo.pickle')</code></pre>
</blockquote>
<p><em>A constuctor that initialises the object from aws pickle</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>folder</td>
<td>str</td>
<td>/testData/</td>
<td>file path of the folder to save in</td>
</tr>
<tr class="even">
<td>aws</td>
<td>bool</td>
<td>True</td>
<td>Whether to load from github or local</td>
</tr>
<tr class="odd">
<td>file_name</td>
<td>str</td>
<td>sol_geo.pickle</td>
<td>file name of the saved class</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="test-that-dataset-and-geography-merge-perfectly" class="level2">
<h2 class="anchored" data-anchor-id="test-that-dataset-and-geography-merge-perfectly">Test that dataset and geography merge perfectly</h2>
<div id="cell-22" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> should this method be callable from the class</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_geo(df:pd.DataFrame, <span class="co"># The dataframe to test</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                geo:gpd.GeoDataFrame, <span class="co"># The geographys</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                ):</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Tests that the provided geography and data merge perfectly. I.e. all data</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">    has a coresponding geography. The primary key to merge id and agg</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use outer join to see if anything is missing</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    geo_df <span class="op">=</span> geo.merge(df, left_on<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'agg'</span>], right_on<span class="op">=</span>[<span class="st">'core: id'</span>, <span class="st">'core: agg'</span>], how <span class="op">=</span> <span class="st">'outer'</span>, indicator <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    test_eq(<span class="bu">sum</span>(geo_df[<span class="st">'_merge'</span>] <span class="op">!=</span> <span class="st">'both'</span>), <span class="dv">0</span>) <span class="co"># The total of non-joined rows should be 0</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="save-solomongeo" class="level2">
<h2 class="anchored" data-anchor-id="save-solomongeo">Save SolomonGeo</h2>
<p>Save as a pickled object</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L438" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.save_pickle" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.save_pickle">SolomonGeo.save_pickle</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.save_pickle (aws:bool=True, folder:str='/testData/',
                         file_name:str='sol_geo.pickle')</code></pre>
</blockquote>
<p><em>Save a pickle of the SolomonGeo class in backblaze b2</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>aws</td>
<td>bool</td>
<td>True</td>
<td>Whether to save to aws or locally</td>
</tr>
<tr class="even">
<td>folder</td>
<td>str</td>
<td>/testData/</td>
<td>file path of the folder to save in, only necesasry for local saving</td>
</tr>
<tr class="odd">
<td>file_name</td>
<td>str</td>
<td>sol_geo.pickle</td>
<td>file name of the saved class</td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L438" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="solomongeo.save_pickle-1" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.save_pickle-1">SolomonGeo.save_pickle</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.save_pickle (aws:bool=True, folder:str='/testData/',
                         file_name:str='sol_geo.pickle')</code></pre>
</blockquote>
<p><em>Save a pickle of the SolomonGeo class in backblaze b2</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>aws</td>
<td>bool</td>
<td>True</td>
<td>Whether to save to aws or locally</td>
</tr>
<tr class="even">
<td>folder</td>
<td>str</td>
<td>/testData/</td>
<td>file path of the folder to save in, only necesasry for local saving</td>
</tr>
<tr class="odd">
<td>file_name</td>
<td>str</td>
<td>sol_geo.pickle</td>
<td>file name of the saved class</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="get-geo-json" class="level2">
<h2 class="anchored" data-anchor-id="get-geo-json">Get Geo JSON</h2>
<p>A getter method for the geometry portion of the dataset that returns a geoJson formated geography.</p>
<p>It only includes the geography and location name as id</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L468" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.get_geojson" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.get_geojson">SolomonGeo.get_geojson</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.get_geojson (geo_filter:str=None)</code></pre>
</blockquote>
<p><em>A getter method for the SolomonGeo class that returns a Geo JSON formatted dataset</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>geo_filter</td>
<td>str</td>
<td>None</td>
<td>Filters the geojson to the requested aggregation</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>dict</strong></td>
<td></td>
<td><strong>Geo JSON formatted dataset</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="store-json" class="level2">
<h2 class="anchored" data-anchor-id="store-json">Store JSON</h2>
<p>A getter method that returns a dcc.Store object with the data of the <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo"><code>SolomonGeo</code></a> class converted to a dictionary for storing with dash. We use a dictionary instead of geojson as the time to convert dictionary back to geopandas is much faster than geojson. (0.01s vs 1.2s) This makes the map much more snappy and responsive</p>
<p>On storing, we drop the geometry as it won’t store as json. Note that you can get around this by using a geojson, but this increases reload time by a lot.</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L484" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.get_store" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.get_store">SolomonGeo.get_store</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.get_store ()</code></pre>
</blockquote>
<p><em>A getter method that returns a dcc.Store object with the data of the <a href="https://Gippers.github.io/SolomonIslandsDataMap/load_data.html#solomongeo"><code>SolomonGeo</code></a> class converted to a dictionary for storing with dash.</em></p>
</section>
</section>
<section id="get-census-data" class="level2">
<h2 class="anchored" data-anchor-id="get-census-data">Get Census Data</h2>
<p>Returns the census dataset for a particular aggregation</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L519" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.get_census" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.get_census">SolomonGeo.get_census</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.get_census (geo_filter:str=None, var:str='Key Statistics',
                        measure:str=None, loc_filter:[&lt;class'str'&gt;]=None,
                        type_filter:str='Total', agg=False)</code></pre>
</blockquote>
<p><em>A getter method for the SolomonGeo class that returns a pandas dataset containg the id variable and the requested census data. This is the minimal data required to display on the map. - Optionally can aggregate the dataset, uses weighted aggregation for proportional data - You should always provide a variable to this function or proportional aggregation won’t work</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>geo_filter</td>
<td>str</td>
<td>None</td>
<td>Filters the dataframe to the requested geography</td>
</tr>
<tr class="even">
<td>var</td>
<td>str</td>
<td>Key Statistics</td>
<td>Selects an upper level</td>
</tr>
<tr class="odd">
<td>measure</td>
<td>str</td>
<td>None</td>
<td>Selects the lower level variable, if var 1 is used, measure must be used.</td>
</tr>
<tr class="even">
<td>loc_filter</td>
<td>[&lt;class ‘str’&gt;]</td>
<td>None</td>
<td>Filters one of more locations</td>
</tr>
<tr class="odd">
<td>type_filter</td>
<td>str</td>
<td>Total</td>
<td>Return either number of proportion</td>
</tr>
<tr class="even">
<td>agg</td>
<td>bool</td>
<td>False</td>
<td>Whether to return the dataset aggregated for the given selection</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>DataFrame</strong></td>
<td></td>
<td><strong>Pandas Dataframe containing population data</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="get-population-data" class="level2">
<h2 class="anchored" data-anchor-id="get-population-data">Get Population Data</h2>
<p>Returns the population projection data for a given aggregation</p>
<hr>
<p><a href="https://github.com/Gippers/SolomonIslandsDataMap/blob/main/SolomonIslandsDataMap/load_data.py#L586" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="solomongeo.get_pop" class="level3">
<h3 class="anchored" data-anchor-id="solomongeo.get_pop">SolomonGeo.get_pop</h3>
<blockquote class="blockquote">
<pre><code> SolomonGeo.get_pop (years:[&lt;class'str'&gt;], var:str=None, measure:str=None,
                     loc_filter:[&lt;class'str'&gt;]=None,
                     type_filter:str='Total', agg=False,
                     agg_location=False, agg_ages=False,
                     ages:[&lt;class'str'&gt;]=None)</code></pre>
</blockquote>
<p><em>A getter method for the SolomonGeo class that returns a pandas dataset containg the id variable and the requested popultion data. This is the minimal data required to display on the map.</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>years</td>
<td>[&lt;class ‘str’&gt;]</td>
<td></td>
<td>Selects the year/years of data to return</td>
</tr>
<tr class="even">
<td>var</td>
<td>str</td>
<td>None</td>
<td>Selects an upper level variable</td>
</tr>
<tr class="odd">
<td>measure</td>
<td>str</td>
<td>None</td>
<td>Selects the lower level variable, if var 1 is used, measure must be used.</td>
</tr>
<tr class="even">
<td>loc_filter</td>
<td>[&lt;class ‘str’&gt;]</td>
<td>None</td>
<td>Filters one of more locations</td>
</tr>
<tr class="odd">
<td>type_filter</td>
<td>str</td>
<td>Total</td>
<td>Return either number of proportion</td>
</tr>
<tr class="even">
<td>agg</td>
<td>bool</td>
<td>False</td>
<td>Whether to return the dataset aggregated for the given selection</td>
</tr>
<tr class="odd">
<td>agg_location</td>
<td>bool</td>
<td>False</td>
<td>If true, don’t aggregate the population data by location</td>
</tr>
<tr class="even">
<td>agg_ages</td>
<td>bool</td>
<td>False</td>
<td>If true, don’t aggregate the population data by age</td>
</tr>
<tr class="odd">
<td>ages</td>
<td>[&lt;class ‘str’&gt;]</td>
<td>None</td>
<td>Filters for one or more Age Brackets, if none returns all</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>DataFrame</strong></td>
<td></td>
<td><strong>Pandas Dataframe containing population data</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="testing" class="level1">
<h1>Testing</h1>
<div id="cell-35" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>sol_geo <span class="op">=</span> SolomonGeo.read_test()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_4212/1241796792.py:276: PerformanceWarning: DataFrame is highly fragmented.  This is usually the result of calling `frame.insert` many times, which has poor performance.  Consider joining all columns at once using pd.concat(axis=1) instead. To get a de-fragmented frame, use `newframe = frame.copy()`
  df['pk'] = df['location'] + "_" + df["type"]</code></pre>
</div>
</div>
<div id="cell-36" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sol_geo.population.copy()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-37" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>test[<span class="st">'Age'</span>][<span class="st">'Age_Bracket'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>(core, location)
Central      0-4
Central      0-4
Central      5-9
Central      5-9
Central    10-14
           ...  
Western    70-74
Western    75-79
Western    75-79
Western      80+
Western      80+
Name: Age_Bracket, Length: 5440, dtype: object</code></pre>
</div>
</div>
<div id="cell-39" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>tester <span class="op">=</span> sol_geo.get_pop(years <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>], var <span class="op">=</span> <span class="st">"Population"</span>, measure<span class="op">=</span><span class="st">'Total'</span>).values[:, <span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>tester</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> work out how to aggregate all the columns other than age.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>array([4156.0, 3988.0, 3289.0, 2521.0, 2118.0, 2102.0, 2022.0, 1940.0,
       1382.0, 1126.0, 821.0, 694.0, 563.0, 428.0, 293.0, 212.0, 199.0,
       4115.0, 4064.0, 3444.0, 2638.0, 2131.0, 2060.0, 2022.0, 1953.0,
       1498.0, 1139.0, 879.0, 695.0, 585.0, 442.0, 306.0, 209.0, 209.0,
       4062.0, 4112.0, 3594.0, 2772.0, 2164.0, 2018.0, 2022.0, 1944.0,
       1623.0, 1150.0, 944.0, 697.0, 606.0, 456.0, 321.0, 210.0, 217.0,
       4339.0, 4133.0, 3418.0, 2721.0, 2275.0, 2072.0, 1916.0, 1841.0,
       1431.0, 1147.0, 835.0, 706.0, 509.0, 483.0, 311.0, 207.0, 136.0,
       4366.0, 4211.0, 3580.0, 2842.0, 2345.0, 2103.0, 1946.0, 1863.0,
       1528.0, 1186.0, 892.0, 715.0, 543.0, 471.0, 344.0, 206.0, 151.0,
       4397.0, 4262.0, 3739.0, 2971.0, 2426.0, 2137.0, 1981.0, 1873.0,
       1629.0, 1224.0, 958.0, 722.0, 584.0, 454.0, 378.0, 206.0, 167.0,
       16116.0, 14274.0, 11675.0, 9959.0, 10071.0, 8908.0, 7662.0, 6667.0,
       4865.0, 3772.0, 2509.0, 2035.0, 1456.0, 1248.0, 878.0, 561.0,
       404.0, 16545.0, 14767.0, 12222.0, 10344.0, 10327.0, 9569.0, 8114.0,
       7060.0, 5352.0, 3998.0, 2795.0, 2095.0, 1582.0, 1254.0, 944.0,
       583.0, 430.0, 17002.0, 15222.0, 12794.0, 10778.0, 10513.0, 10227.0,
       8595.0, 7434.0, 5874.0, 4224.0, 3115.0, 2154.0, 1724.0, 1257.0,
       1012.0, 602.0, 461.0, 8338.0, 7292.0, 6381.0, 7062.0, 9399.0,
       8235.0, 6289.0, 5060.0, 3667.0, 2806.0, 1995.0, 1393.0, 910.0,
       577.0, 312.0, 173.0, 114.0, 8578.0, 7491.0, 6504.0, 6806.0, 9079.0,
       8811.0, 6668.0, 5315.0, 3968.0, 2946.0, 2161.0, 1488.0, 989.0,
       623.0, 348.0, 178.0, 125.0, 8794.0, 7688.0, 6689.0, 6628.0, 8620.0,
       9341.0, 7078.0, 5569.0, 4292.0, 3090.0, 2335.0, 1589.0, 1075.0,
       671.0, 388.0, 188.0, 135.0, 4023.0, 3898.0, 3206.0, 2615.0, 2188.0,
       2053.0, 2039.0, 1893.0, 1339.0, 1137.0, 955.0, 823.0, 634.0, 499.0,
       350.0, 268.0, 228.0, 4029.0, 3965.0, 3364.0, 2712.0, 2261.0,
       2063.0, 2047.0, 1948.0, 1457.0, 1145.0, 995.0, 839.0, 666.0, 511.0,
       367.0, 262.0, 246.0, 4035.0, 4001.0, 3523.0, 2815.0, 2346.0,
       2080.0, 2051.0, 1984.0, 1587.0, 1155.0, 1036.0, 854.0, 700.0,
       522.0, 387.0, 260.0, 260.0, 7400.0, 6377.0, 5042.0, 3807.0, 3671.0,
       3553.0, 3199.0, 2734.0, 1892.0, 1542.0, 1132.0, 958.0, 740.0,
       629.0, 399.0, 295.0, 257.0, 7434.0, 6625.0, 5301.0, 3990.0, 3613.0,
       3587.0, 3263.0, 2831.0, 2050.0, 1566.0, 1212.0, 964.0, 776.0,
       630.0, 433.0, 282.0, 275.0, 7420.0, 6855.0, 5560.0, 4220.0, 3563.0,
       3612.0, 3321.0, 2909.0, 2227.0, 1590.0, 1301.0, 969.0, 816.0,
       627.0, 469.0, 274.0, 288.0, 22242.0, 21688.0, 18652.0, 14923.0,
       12290.0, 10767.0, 9563.0, 8157.0, 6171.0, 5141.0, 4105.0, 3477.0,
       3054.0, 2348.0, 1540.0, 1056.0, 969.0, 21921.0, 21930.0, 19311.0,
       15420.0, 12354.0, 10667.0, 9526.0, 8273.0, 6423.0, 5177.0, 4244.0,
       3487.0, 3078.0, 2429.0, 1613.0, 1039.0, 1014.0, 21554.0, 22035.0,
       19931.0, 15990.0, 12490.0, 10579.0, 9467.0, 8346.0, 6698.0, 5209.0,
       4394.0, 3509.0, 3091.0, 2504.0, 1691.0, 1046.0, 1041.0, 409.0,
       414.0, 448.0, 301.0, 251.0, 169.0, 204.0, 188.0, 134.0, 134.0,
       138.0, 146.0, 111.0, 58.0, 62.0, 62.0, 46.0, 409.0, 417.0, 445.0,
       341.0, 255.0, 190.0, 193.0, 201.0, 144.0, 130.0, 138.0, 145.0,
       120.0, 66.0, 56.0, 60.0, 51.0, 411.0, 421.0, 436.0, 383.0, 258.0,
       215.0, 181.0, 212.0, 156.0, 128.0, 138.0, 142.0, 128.0, 75.0, 51.0,
       60.0, 56.0, 3048.0, 3293.0, 2702.0, 2184.0, 1727.0, 1555.0, 1390.0,
       1416.0, 1153.0, 967.0, 783.0, 687.0, 499.0, 386.0, 320.0, 267.0,
       302.0, 2985.0, 3294.0, 2849.0, 2245.0, 1776.0, 1537.0, 1393.0,
       1389.0, 1211.0, 980.0, 811.0, 694.0, 532.0, 388.0, 319.0, 262.0,
       306.0, 2933.0, 3251.0, 2995.0, 2312.0, 1839.0, 1520.0, 1405.0,
       1348.0, 1269.0, 993.0, 842.0, 697.0, 567.0, 393.0, 320.0, 258.0,
       310.0, 11916.0, 11508.0, 11564.0, 11520.0, 10650.0, 8704.0, 7373.0,
       6083.0, 5447.0, 4995.0, 4729.0, 4054.0, 3076.0, 2080.0, 1468.0,
       959.0, 897.0, 11911.0, 11346.0, 9841.0, 8485.0, 7192.0, 6216.0,
       5623.0, 5244.0, 4673.0, 3734.0, 2723.0, 2070.0, 1621.0, 1250.0,
       906.0, 630.0, 466.0, 11914.0, 11481.0, 10203.0, 8634.0, 7427.0,
       6268.0, 5690.0, 5252.0, 4801.0, 3904.0, 2894.0, 2131.0, 1689.0,
       1278.0, 944.0, 632.0, 508.0], dtype=object)</code></pre>
</div>
</div>
<div id="cell-40" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_pop(years <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>], var <span class="op">=</span> <span class="st">'Population'</span>, measure <span class="op">=</span> <span class="st">'Total'</span>,  ages <span class="op">=</span> [<span class="st">"0-4"</span>])<span class="co">#, agg = True) loc_filter = ['Honiara', 'Choiseul'],</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">core</th>
<th data-quarto-table-cell-role="th">Age</th>
<th data-quarto-table-cell-role="th">Population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Age_Bracket</th>
<th data-quarto-table-cell-role="th">Total</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>2010</td>
<td>0-4</td>
<td>4156.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central</th>
<td>2011</td>
<td>0-4</td>
<td>4115.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>2012</td>
<td>0-4</td>
<td>4062.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>2010</td>
<td>0-4</td>
<td>4339.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>2011</td>
<td>0-4</td>
<td>4366.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>2012</td>
<td>0-4</td>
<td>4397.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>2010</td>
<td>0-4</td>
<td>16116.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>2011</td>
<td>0-4</td>
<td>16545.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>2012</td>
<td>0-4</td>
<td>17002.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>2010</td>
<td>0-4</td>
<td>8338.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>2011</td>
<td>0-4</td>
<td>8578.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>2012</td>
<td>0-4</td>
<td>8794.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>2010</td>
<td>0-4</td>
<td>4023.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>2011</td>
<td>0-4</td>
<td>4029.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>2012</td>
<td>0-4</td>
<td>4035.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>2010</td>
<td>0-4</td>
<td>7400.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>2011</td>
<td>0-4</td>
<td>7434.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>2012</td>
<td>0-4</td>
<td>7420.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>2010</td>
<td>0-4</td>
<td>22242.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>2011</td>
<td>0-4</td>
<td>21921.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>2012</td>
<td>0-4</td>
<td>21554.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>2010</td>
<td>0-4</td>
<td>409.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>2011</td>
<td>0-4</td>
<td>409.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>2012</td>
<td>0-4</td>
<td>411.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>2010</td>
<td>0-4</td>
<td>3048.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>2011</td>
<td>0-4</td>
<td>2985.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>2012</td>
<td>0-4</td>
<td>2933.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2010</td>
<td>0-4</td>
<td>11916.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2011</td>
<td>0-4</td>
<td>11911.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2012</td>
<td>0-4</td>
<td>11914.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-41" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sol_geo.locations</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'Province': array(['Central', 'Choiseul', 'Guadalcanal', 'Honiara', 'Isabel',
        'Makira-Ulawa', 'Malaita', 'Rennell-Bell', 'Temotu', 'Western'],
       dtype=object),
 'Constituency': array(['Auki-Langalanga', 'Baegu-Asifola', 'Central Guadalcanal',
        'Central Honiara', "Central Kwara'ae", 'Central Makira',
        'East AreAre', 'East Choiseul', 'East Guadalcanal', 'East Honiara',
        'East Kwaio', 'East Makira', 'East Malaita', 'East-Central',
        'Fataleka', 'Gao-Bugotu', 'Gizo-Kolombangara',
        'Hograno-Kia-Havulei', 'Lau-Mbaelela', 'Malaita Outer Island',
        'Marigne-Kokota', 'Marovo', 'Nggela', 'North Guadalcanal',
        'North Malaita', 'North New Georgia', 'North Vella la Vella',
        'North West Choiseul', 'North West Guadalcanl', 'North-East',
        'Ranongga-Simbo', 'Rennell-Bellona', 'Savo-Russull Islands',
        'Shortland Islands', 'Small Malaita', 'South Choiseul',
        'South Guadalcanal', 'South New Georgia-Rendova',
        'South Vella la Vella', 'Temotu Pele', 'Temotu Vatu',
        'Temotu-Nende', 'Ulawa-Ugi', 'West Areare', 'West Guadalcanal',
        'West Honiara', 'West Kwaio', "West Kwara'ae", 'West Makira',
        'West New Georgia-Vonavona'], dtype=object),
 'Ward': array(['Aba - Asimeuru', 'Aiaisi', 'Aimela', 'Aola', 'Areare',
        'Arosi East', 'Arosi North', 'Arosi South', 'Arosi West', 'Asimae',
        'Auki', 'Avuavu', 'Babatana', 'Bangara', 'Batava', 'Bauro Central',
        'Bauro East', 'Bauro West', 'Bilua', 'Birao', 'Buala',
        'Buini Tusu', 'Buma', 'Central Ranongga', 'Cruz', 'Dovele',
        'Duff Islands', 'Duidui', 'East Baegu', 'East Gela',
        'East Ghaobata', 'East Ghongau', 'East Tasimboko',
        'East Te Nggano', 'Fauabu', 'Faumamanu - Kwai', 'Fenualoa',
        'Foondo - Gwaiau', 'Fouenda', 'Gizo', 'Graciosa Bay', 'Gulalafou',
        'Haununu', 'Havulei', 'Hovukoilo', 'Inner Shortlands', 'Iringgila',
        'Japuana', 'Kaloka', 'Kangava', 'Katupika', 'Kerepangara', 'Kia',
        'Kirugela', 'Kmaga', 'Kokota', "Kola'A", 'Kolokarako',
        'Kolombaghea', 'Kolomola', 'Kolotubi', 'Koviloko', 'Kukum',
        'Kusaghe', 'Kwaimela - Radefasu', 'Kwarekwareo', 'Langalanga',
        'Lipe-Temua', 'Longgu', 'Lovukol', 'Luaniua', 'Lughu',
        'Luva Station', 'Malango', "Malu'U", 'Mandalua - Folotana',
        'Manuopo', 'Mareho', 'Matakwalao', 'Matangi', 'Mataniko',
        'Mbanika', 'Mbumburu', 'Moli', 'Mugihenua', 'Munda', 'Nafinua',
        'Naha', 'Nanggu-Lord Howe', 'Nea-Noole', 'Nenumpo', 'Neo',
        'Nevenema', 'Nggatokae', 'Nggosi', 'Nipua-Nopoli', 'Nono', 'Noro',
        'North East Gela', 'North East Santa Cruz', 'North Kolombangara',
        'North Ranongga', 'North Rendova', 'North Savo', 'North Ulawa',
        'North Vangunu', 'North West Gela', 'Nusa Roviana',
        'Outer Shortlands', 'Panatina', 'Paripao', 'Pavuvu', 'Pelau',
        'Polo', 'Polynesian Outer Islands', 'Raroisuu', 'Rawo',
        'Rove - Lengakiki', 'Roviana Lagoon', "Sa'Aiho", 'Saghalu',
        'Samasodu', 'Sandfly-Buenavista', 'Santa Ana', 'Santa Catalina',
        'Savulei', 'Senga', 'Siesie', 'Sigana', 'Sikaiana', 'Simbo',
        'South East Gela', 'South Kolombangara', 'South Ranongga',
        'South Rendova', 'South Savo', 'South Ulawa', 'South West Gela',
        'Star Harbour North', 'Star Harbour South', 'Sububenu- Burianias',
        'Sulufou - Kwarande', 'Susubona', 'Susuka', 'Tai', 'Takwa',
        'Talise', 'Tandai', 'Tangarare', 'Tatamba', 'Tavula', 'Tepakaza',
        'Tetau Nangoto', 'Tetekanji', 'Tikopia', 'Tirotonga', 'Tulagi',
        'Ugi And Pio', 'Utupua', 'Valasi', 'Vanikoro', 'Vasiduki',
        'Vatukulau', 'Vavaea', 'Viviru', 'Vonavona', 'Vonunu', 'Vuhokesa',
        'Vulolo', 'Vura', 'Waghina', 'Wainoni East', 'Wainoni West',
        'Wanderer Bay', 'Waneagu - Taelanasin', 'Weagu Silana Sina',
        'Weather Coast', 'West Baegu \xa0- Fatale', 'West Gela',
        'West Ghaobata', 'West Ghongau', 'West Te Nggano', 'West Ulawa'],
       dtype=object)}</code></pre>
</div>
</div>
<section id="save-and-load" class="level2">
<h2 class="anchored" data-anchor-id="save-and-load">Save and Load</h2>
<p>Test that the newly created solomon geo object can be saved to aws</p>
<div id="cell-44" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>sol_geo.save_pickle()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Test that we can connect to the aws s3 bucket</p>
<div id="cell-46" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the S3 object</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> s3_client().get_object(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    Bucket <span class="op">=</span> <span class="st">'hobby-data'</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    Key <span class="op">=</span> <span class="st">'test.txt'</span>, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the pickle</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> obj[<span class="st">'Body'</span>].read()</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>:</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Issue dowloading test file from AWS."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-47" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>SolomonGeo.load_pickle(<span class="st">'/testData/'</span>, aws<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;__main__.SolomonGeo&gt;</code></pre>
</div>
</div>
<p>Test that gen_stored creates a copy correctly from a json serialised dataframe</p>
<div id="cell-49" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>stored_geo <span class="op">=</span> sol_geo.get_store()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> I need to potentially created a function to check if two objects are the same</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-50" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(stored_geo.data[<span class="st">'data'</span>][<span class="st">'elec'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Total</th>
<th data-quarto-table-cell-role="th">Proportion</th>
<th data-quarto-table-cell-role="th">candParty</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Order</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Joseph Waleanisia</td>
<td>108</td>
<td>0.017</td>
<td>Joseph Waleanisia (UP)</td>
<td>UP</td>
<td>4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Obadiah Koti</td>
<td>257</td>
<td>0.039</td>
<td>Obadiah Koti (PLD)</td>
<td>PLD</td>
<td>3</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Talauburi Anisi</td>
<td>488</td>
<td>0.075</td>
<td>Talauburi Anisi (KAD)</td>
<td>KAD</td>
<td>2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>David Filia</td>
<td>1348</td>
<td>0.207</td>
<td>David Filia (OUR)</td>
<td>OUR</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Cooper Wale</td>
<td>4314</td>
<td>0.662</td>
<td>Cooper Wale (SID)</td>
<td>SID</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">329</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>West New Georgia-Vonavona</td>
<td>Usa Kama</td>
<td>11</td>
<td>0.001</td>
<td>Usa Kama (IND)</td>
<td>IND</td>
<td>4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">330</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>West New Georgia-Vonavona</td>
<td>Ben Anikwai</td>
<td>45</td>
<td>0.006</td>
<td>Ben Anikwai (IND)</td>
<td>IND</td>
<td>3</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">331</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>West New Georgia-Vonavona</td>
<td>Trevor Veo</td>
<td>1514</td>
<td>0.190</td>
<td>Trevor Veo (OUR)</td>
<td>OUR</td>
<td>2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">332</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>West New Georgia-Vonavona</td>
<td>V Tausinga</td>
<td>2524</td>
<td>0.317</td>
<td>V Tausinga (UP)</td>
<td>UP</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">333</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>West New Georgia-Vonavona</td>
<td>George Temahua</td>
<td>3869</td>
<td>0.486</td>
<td>George Temahua (SID)</td>
<td>SID</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>334 rows × 10 columns</p>
</div>
</div>
</div>
<div id="cell-51" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>restored_geo <span class="op">=</span> SolomonGeo.gen_stored(stored_geo.data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-52" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>restored_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, loc_filter<span class="op">=</span>[<span class="st">'Nggela'</span>, <span class="st">'East AreAre'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Total Households</th>
<th data-quarto-table-cell-role="th">Total population</th>
<th data-quarto-table-cell-role="th">Male population</th>
<th data-quarto-table-cell-role="th">Female population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">East AreAre</th>
<td>1105</td>
<td>7099</td>
<td>3567.0</td>
<td>3532.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Nggela</th>
<td>3315</td>
<td>16811</td>
<td>8500.0</td>
<td>8311.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-53" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> create a test to check that two object are the same. Probably need to write defualt behaviour into</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># object. Maybe use fastcore test_eq</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#test_eq(stored_geo.geo_df, sol_geo.geo_df)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Test filtering of down to multiple locations</p>
<div id="cell-55" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#test_eq(sol_geo.get_census(geo_filter = 'constituency')['total_pop'].sum(), const_df['total_pop'].sum())</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, loc_filter<span class="op">=</span>[<span class="st">'Nggela'</span>, <span class="st">'East AreAre'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Total Households</th>
<th data-quarto-table-cell-role="th">Total population</th>
<th data-quarto-table-cell-role="th">Male population</th>
<th data-quarto-table-cell-role="th">Female population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">East AreAre</th>
<td>1105</td>
<td>7099</td>
<td>3567.0</td>
<td>3532.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Nggela</th>
<td>3315</td>
<td>16811</td>
<td>8500.0</td>
<td>8311.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Test Proportions</p>
<div id="cell-57" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#test_eq(sol_geo.get_census(geo_filter = 'constituency')['total_pop'].sum(), const_df['total_pop'].sum())</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, loc_filter<span class="op">=</span>[<span class="st">'Nggela'</span>, <span class="st">'East AreAre'</span>], agg <span class="op">=</span> <span class="va">True</span>, type_filter<span class="op">=</span><span class="st">'Proportion'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Total Households</th>
<td>0.084609</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Total population</th>
<td>0.457695</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Male population</th>
<td>0.230992</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Female population</th>
<td>0.226704</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-58" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> work out how to check save and load are the same as a test</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Might need to wreite and equality function</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>restored_geo.population</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="4" data-quarto-table-cell-role="th" data-halign="left">core</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">Age</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Age_Bracket</th>
<th data-quarto-table-cell-role="th">Numerical_Bracket</th>
<th data-quarto-table-cell-role="th">Males</th>
<th data-quarto-table-cell-role="th">Females</th>
<th data-quarto-table-cell-role="th">Total</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>0-4</td>
<td>0</td>
<td>2119.000000</td>
<td>2037.000000</td>
<td>4156.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Proportion</td>
<td>2010</td>
<td>0-4</td>
<td>0</td>
<td>0.007116</td>
<td>0.007210</td>
<td>0.007162</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>5-9</td>
<td>5</td>
<td>2074.000000</td>
<td>1914.000000</td>
<td>3988.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Proportion</td>
<td>2010</td>
<td>5-9</td>
<td>5</td>
<td>0.006965</td>
<td>0.006775</td>
<td>0.006872</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>10-14</td>
<td>10</td>
<td>1732.000000</td>
<td>1556.000000</td>
<td>3289.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>70-74</td>
<td>70</td>
<td>0.001877</td>
<td>0.001965</td>
<td>0.001920</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Total</td>
<td>2025</td>
<td>75-79</td>
<td>75</td>
<td>466.000000</td>
<td>493.000000</td>
<td>959.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>75-79</td>
<td>75</td>
<td>0.001197</td>
<td>0.001315</td>
<td>0.001255</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Total</td>
<td>2025</td>
<td>80+</td>
<td>80</td>
<td>448.000000</td>
<td>449.000000</td>
<td>897.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>80+</td>
<td>80</td>
<td>0.001150</td>
<td>0.001197</td>
<td>0.001173</td>
</tr>
</tbody>
</table>

<p>5440 rows × 9 columns</p>
</div>
</div>
</div>
<div id="cell-59" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sol_geo.population</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>test.loc[:, (<span class="st">'core'</span>, <span class="st">'location'</span>)] <span class="op">=</span> test.index</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-60" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="4" data-quarto-table-cell-role="th" data-halign="left">core</th>
<th colspan="2" data-quarto-table-cell-role="th" data-halign="left">Age</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Population</th>
<th data-quarto-table-cell-role="th">core</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Age_Bracket</th>
<th data-quarto-table-cell-role="th">Numerical_Bracket</th>
<th data-quarto-table-cell-role="th">Males</th>
<th data-quarto-table-cell-role="th">Females</th>
<th data-quarto-table-cell-role="th">Total</th>
<th data-quarto-table-cell-role="th">location</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>0-4</td>
<td>0</td>
<td>2119.000000</td>
<td>2037.000000</td>
<td>4156.000000</td>
<td>Central</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Proportion</td>
<td>2010</td>
<td>0-4</td>
<td>0</td>
<td>0.007116</td>
<td>0.007210</td>
<td>0.007162</td>
<td>Central</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>5-9</td>
<td>5</td>
<td>2074.000000</td>
<td>1914.000000</td>
<td>3988.000000</td>
<td>Central</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Proportion</td>
<td>2010</td>
<td>5-9</td>
<td>5</td>
<td>0.006965</td>
<td>0.006775</td>
<td>0.006872</td>
<td>Central</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>4</td>
<td>Province</td>
<td>Total</td>
<td>2010</td>
<td>10-14</td>
<td>10</td>
<td>1732.000000</td>
<td>1556.000000</td>
<td>3289.000000</td>
<td>Central</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>70-74</td>
<td>70</td>
<td>0.001877</td>
<td>0.001965</td>
<td>0.001920</td>
<td>Western</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Total</td>
<td>2025</td>
<td>75-79</td>
<td>75</td>
<td>466.000000</td>
<td>493.000000</td>
<td>959.000000</td>
<td>Western</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>75-79</td>
<td>75</td>
<td>0.001197</td>
<td>0.001315</td>
<td>0.001255</td>
<td>Western</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Total</td>
<td>2025</td>
<td>80+</td>
<td>80</td>
<td>448.000000</td>
<td>449.000000</td>
<td>897.000000</td>
<td>Western</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>2</td>
<td>Province</td>
<td>Proportion</td>
<td>2025</td>
<td>80+</td>
<td>80</td>
<td>0.001150</td>
<td>0.001197</td>
<td>0.001173</td>
<td>Western</td>
</tr>
</tbody>
</table>

<p>5440 rows × 10 columns</p>
</div>
</div>
</div>
<div id="cell-61" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> should do a count check for the geojson similar to this</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>sol_geo.census[sol_geo.census[<span class="st">'core'</span>][<span class="st">'agg'</span>] <span class="op">==</span> <span class="st">'Constituency'</span>].count()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>core                    id                         100
                        location                   100
                        agg                        100
                        type                       100
Key Statistics          Total Households           100
                                                  ... 
Disability walking      Some Difficulty            100
                        Cannot perform the task    100
Disability remembering  No Difficulty at all       100
                        Some Difficulty            100
                        Cannot perform the task    100
Length: 339, dtype: int64</code></pre>
</div>
</div>
</section>
</section>
<section id="todo-check-that-all-proportions-are-less-than-0" class="level1">
<h1>TODO check that all proportions are less than 0</h1>
<div id="cell-63" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> filter and test equality?</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sol_geo.get_geojson(geo_filter <span class="op">=</span> <span class="st">'Ward'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-64" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>sol_geo.geo</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">location</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">location</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aba - Asimeuru</th>
<td>MULTIPOLYGON (((161.54336 -9.54751, 161.54367 ...</td>
<td>722</td>
<td>Ward</td>
<td>2009</td>
<td>Aba - Asimeuru</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aiaisi</th>
<td>MULTIPOLYGON (((161.26900 -9.21229, 161.27144 ...</td>
<td>719</td>
<td>Ward</td>
<td>2009</td>
<td>Aiaisi</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aimela</th>
<td>MULTIPOLYGON (((160.68653 -8.71158, 160.67020 ...</td>
<td>702</td>
<td>Ward</td>
<td>2009</td>
<td>Aimela</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aola</th>
<td>MULTIPOLYGON (((160.50139 -9.52996, 160.50196 ...</td>
<td>616</td>
<td>Ward</td>
<td>2009</td>
<td>Aola</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Areare</th>
<td>MULTIPOLYGON (((161.35878 -9.46664, 161.35859 ...</td>
<td>720</td>
<td>Ward</td>
<td>2009</td>
<td>Areare</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Makira</th>
<td>MULTIPOLYGON (((161.50441 -10.51180, 161.50559...</td>
<td>844</td>
<td>Constituency</td>
<td>2009</td>
<td>West Makira</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West New Georgia-Vonavona</th>
<td>MULTIPOLYGON (((157.27598 -8.35143, 157.26991 ...</td>
<td>209</td>
<td>Constituency</td>
<td>2009</td>
<td>West New Georgia-Vonavona</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Te Nggano</th>
<td>MULTIPOLYGON (((160.35206 -11.66366, 160.30721...</td>
<td>502</td>
<td>Ward</td>
<td>2009</td>
<td>West Te Nggano</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West Ulawa</th>
<td>MULTIPOLYGON (((161.97730 -9.77521, 161.94899 ...</td>
<td>803</td>
<td>Ward</td>
<td>2009</td>
<td>West Ulawa</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>MULTIPOLYGON (((158.25148 -8.78861, 158.24885 ...</td>
<td>2</td>
<td>Province</td>
<td>2009</td>
<td>Western</td>
</tr>
</tbody>
</table>

<p>243 rows × 5 columns</p>
</div>
</div>
</div>
<p>The sum after merging and filtering should equal the sum from the raw dataset.</p>
<div id="cell-66" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>test_eq(sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>,var <span class="op">=</span> <span class="st">'Key Statistics'</span>, measure <span class="op">=</span> <span class="st">'Total Households'</span>, agg <span class="op">=</span> <span class="va">True</span>)[<span class="dv">0</span>], </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>        const_df.loc[const_df[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'Total'</span>].loc[const_df[<span class="st">'agg'</span>] <span class="op">==</span> <span class="st">'Constituency'</span>][<span class="st">'Key Statistics: Total Households'</span>].<span class="bu">sum</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_4212/2628698497.py:1: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  test_eq(sol_geo.get_census(geo_filter = 'Constituency',var = 'Key Statistics', measure = 'Total Households', agg = True)[0],</code></pre>
</div>
</div>
<div id="cell-67" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, var<span class="op">=</span><span class="st">'Key Statistics'</span>, measure <span class="op">=</span> <span class="st">'Total Households'</span>, agg <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>Total Households    91251
dtype: int64</code></pre>
</div>
</div>
<div id="cell-68" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, var<span class="op">=</span><span class="st">'Key Statistics'</span>, measure <span class="op">=</span> <span class="st">'Total Households'</span>, loc_filter<span class="op">=</span>[<span class="st">'West Guadalcanal'</span>]).values[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>array([1671])</code></pre>
</div>
</div>
<div id="cell-69" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>sol_geo.census[<span class="st">'core'</span>].<span class="bu">filter</span>(items <span class="op">=</span> [<span class="st">'id'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">pk</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Proportion</th>
<td>722</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Total</th>
<td>722</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aiaisi_Total</th>
<td>719</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aiaisi_Proportion</th>
<td>719</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aimela_Proportion</th>
<td>702</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Te Nggano_Proportion</th>
<td>502</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West Ulawa_Proportion</th>
<td>803</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Ulawa_Total</th>
<td>803</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western_Total</th>
<td>2</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western_Proportion</th>
<td>2</td>
</tr>
</tbody>
</table>

<p>486 rows × 1 columns</p>
</div>
</div>
</div>
<div id="cell-70" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> -test that they all sum to one</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>test_agg <span class="op">=</span> sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, type_filter<span class="op">=</span><span class="st">'Proportion'</span>, var <span class="op">=</span> <span class="st">"Main source of household drinking water"</span>, </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                              agg <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>test_eq(test_agg.<span class="bu">sum</span>(), <span class="fl">1.0</span>)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>test_agg</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>metered SIWA drinking water       0.091681
communal standpipe                0.351141
private water tank                0.124711
communal water tank               0.106191
well - protected                  0.020811
well - unprotected                0.017819
river or stream                   0.245433
bottled water                     0.006115
other source of drinking water    0.036098
dtype: float64</code></pre>
</div>
</div>
<div id="cell-71" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_census(geo_filter <span class="op">=</span> <span class="st">'Constituency'</span>, type_filter<span class="op">=</span><span class="st">'Proportion'</span>, var <span class="op">=</span> <span class="st">"Key Statistics"</span>, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                              agg <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>Total Households     1.000
Total population     1.000
Male population      0.513
Female population    0.487
dtype: float64</code></pre>
</div>
</div>
<div id="cell-72" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>test_agg.<span class="bu">sum</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>1.0</code></pre>
</div>
</div>
<div id="cell-73" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>sol_geo.ages</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['0-4',
 '10-14',
 '15-19',
 '20-24',
 '25-29',
 '30-34',
 '35-39',
 '40-44',
 '45-49',
 '5-9',
 '50-54',
 '55-59',
 '60-64',
 '65-69',
 '70-74',
 '75-79',
 '80+']</code></pre>
</div>
</div>
<div id="cell-74" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>sol_geo.pop_years</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[2010,
 2011,
 2012,
 2013,
 2014,
 2015,
 2016,
 2017,
 2018,
 2019,
 2020,
 2021,
 2022,
 2023,
 2024,
 2025]</code></pre>
</div>
</div>
<section id="testing-of-population-getter" class="level3">
<h3 class="anchored" data-anchor-id="testing-of-population-getter">Testing of Population Getter</h3>
<div id="cell-76" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_pop(years <span class="op">=</span> [<span class="dv">2024</span>],var<span class="op">=</span><span class="st">'Population'</span>,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    measure<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    loc_filter<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    type_filter<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    agg<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    ages<span class="op">=</span>[<span class="st">'0-4'</span>] </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">core</th>
<th data-quarto-table-cell-role="th">Age</th>
<th data-quarto-table-cell-role="th">Population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Age_Bracket</th>
<th data-quarto-table-cell-role="th">Total</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>2024</td>
<td>0-4</td>
<td>3641.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>2024</td>
<td>0-4</td>
<td>4973.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>2024</td>
<td>0-4</td>
<td>22087.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>2024</td>
<td>0-4</td>
<td>8535.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>2024</td>
<td>0-4</td>
<td>4203.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>2024</td>
<td>0-4</td>
<td>7242.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>2024</td>
<td>0-4</td>
<td>19039.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>2024</td>
<td>0-4</td>
<td>581.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>2024</td>
<td>0-4</td>
<td>2697.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>2024</td>
<td>0-4</td>
<td>11834.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-77" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sol_geo.get_pop(years <span class="op">=</span> [<span class="dv">2023</span>, <span class="dv">2024</span>],var<span class="op">=</span><span class="st">'Population'</span>,</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    measure<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    loc_filter<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    type_filter<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    agg<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    ages<span class="op">=</span>[<span class="st">'0-4'</span>] </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-78" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sol_geo.get_pop(years <span class="op">=</span> sol_geo.pop_years,var<span class="op">=</span><span class="st">'Population'</span>,</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    measure<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    type_filter<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    agg<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    agg_location <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    ages<span class="op">=</span>sol_geo.ages</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Check that sum of proportions rounded is 100</p>
<div id="cell-80" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>prop <span class="op">=</span> sol_geo.get_pop(years <span class="op">=</span> [sol_geo.pop_years[<span class="op">-</span><span class="dv">1</span>]],</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>                var<span class="op">=</span><span class="st">'Population'</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                measure<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                type_filter<span class="op">=</span><span class="st">'Proportion'</span>,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>                agg<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                ages<span class="op">=</span>sol_geo.ages,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    ).values[<span class="dv">0</span>, <span class="dv">0</span>]</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="dv">1</span>, <span class="bu">int</span>(prop))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-81" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>sol_geo.get_pop(years <span class="op">=</span> [<span class="dv">2024</span>],</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>                var<span class="op">=</span><span class="st">'Population'</span>,</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>                measure<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>                type_filter<span class="op">=</span><span class="st">'Total'</span>,</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>                agg<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>                ages<span class="op">=</span>sol_geo.ages,</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>                agg_location <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Total</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, year)</th>
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th rowspan="10" data-quarto-table-cell-role="th" data-valign="top">2024</th>
<th data-quarto-table-cell-role="th">Central</th>
<td>34359.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>40226.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>178238.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>97801.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>38134.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>59705.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>165610.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>4702.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>26182.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>105367.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-82" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>sol_geo.locations[<span class="st">'Province'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>array(['Central', 'Choiseul', 'Guadalcanal', 'Honiara', 'Isabel',
       'Makira-Ulawa', 'Malaita', 'Rennell-Bell', 'Temotu', 'Western'],
      dtype=object)</code></pre>
</div>
</div>
<div id="cell-83" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>sol_geo.census</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="4" data-quarto-table-cell-role="th" data-halign="left">core</th>
<th data-quarto-table-cell-role="th">Key Statistics</th>
<th colspan="5" data-quarto-table-cell-role="th" data-halign="left">Main source of household drinking water</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Disability seeing</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability hearing</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability walking</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability remembering</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">location</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">Total Households</th>
<th data-quarto-table-cell-role="th">metered SIWA drinking water</th>
<th data-quarto-table-cell-role="th">communal standpipe</th>
<th data-quarto-table-cell-role="th">private water tank</th>
<th data-quarto-table-cell-role="th">communal water tank</th>
<th data-quarto-table-cell-role="th">well - protected</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">pk</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Proportion</th>
<td>722</td>
<td>Aba - Asimeuru</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0000</td>
<td>0.5378</td>
<td>0.0245</td>
<td>0.0085</td>
<td>0.0011</td>
<td>...</td>
<td>0.003849</td>
<td>0.940843</td>
<td>0.054295</td>
<td>0.004862</td>
<td>0.880065</td>
<td>0.105754</td>
<td>0.014182</td>
<td>0.906807</td>
<td>0.081645</td>
<td>0.011548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Total</th>
<td>722</td>
<td>Aba - Asimeuru</td>
<td>Ward</td>
<td>Total</td>
<td>939</td>
<td>0.0000</td>
<td>505.0000</td>
<td>23.0000</td>
<td>8.0000</td>
<td>1.0000</td>
<td>...</td>
<td>19.000000</td>
<td>4644.000000</td>
<td>268.000000</td>
<td>24.000000</td>
<td>4344.000000</td>
<td>522.000000</td>
<td>70.000000</td>
<td>4476.000000</td>
<td>403.000000</td>
<td>57.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aiaisi_Total</th>
<td>719</td>
<td>Aiaisi</td>
<td>Ward</td>
<td>Total</td>
<td>561</td>
<td>1.0000</td>
<td>403.0000</td>
<td>9.0000</td>
<td>3.0000</td>
<td>1.0000</td>
<td>...</td>
<td>9.000000</td>
<td>3415.000000</td>
<td>149.000000</td>
<td>10.000000</td>
<td>3316.000000</td>
<td>239.000000</td>
<td>19.000000</td>
<td>3349.000000</td>
<td>205.000000</td>
<td>20.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aiaisi_Proportion</th>
<td>719</td>
<td>Aiaisi</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0018</td>
<td>0.7184</td>
<td>0.0160</td>
<td>0.0053</td>
<td>0.0018</td>
<td>...</td>
<td>0.002518</td>
<td>0.955512</td>
<td>0.041690</td>
<td>0.002798</td>
<td>0.927812</td>
<td>0.066872</td>
<td>0.005316</td>
<td>0.937045</td>
<td>0.057359</td>
<td>0.005596</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aimela_Proportion</th>
<td>702</td>
<td>Aimela</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0164</td>
<td>0.2937</td>
<td>0.0762</td>
<td>0.1921</td>
<td>0.1360</td>
<td>...</td>
<td>0.001571</td>
<td>0.959288</td>
<td>0.038749</td>
<td>0.001964</td>
<td>0.954444</td>
<td>0.039796</td>
<td>0.005760</td>
<td>0.951172</td>
<td>0.043330</td>
<td>0.005498</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Te Nggano_Proportion</th>
<td>502</td>
<td>West Te Nggano</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0000</td>
<td>0.0000</td>
<td>0.3704</td>
<td>0.4568</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>0.978836</td>
<td>0.018519</td>
<td>0.002646</td>
<td>0.968254</td>
<td>0.031746</td>
<td>0.000000</td>
<td>0.986772</td>
<td>0.013228</td>
<td>0.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West Ulawa_Proportion</th>
<td>803</td>
<td>West Ulawa</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0099</td>
<td>0.7673</td>
<td>0.0050</td>
<td>0.0050</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>0.929070</td>
<td>0.069767</td>
<td>0.001163</td>
<td>0.886047</td>
<td>0.113953</td>
<td>0.000000</td>
<td>0.920930</td>
<td>0.077907</td>
<td>0.001163</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Ulawa_Total</th>
<td>803</td>
<td>West Ulawa</td>
<td>Ward</td>
<td>Total</td>
<td>202</td>
<td>2.0000</td>
<td>155.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>799.000000</td>
<td>60.000000</td>
<td>1.000000</td>
<td>762.000000</td>
<td>98.000000</td>
<td>0.000000</td>
<td>792.000000</td>
<td>67.000000</td>
<td>1.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western_Total</th>
<td>2</td>
<td>Western</td>
<td>Province</td>
<td>Total</td>
<td>13762</td>
<td>37.0000</td>
<td>4151.0000</td>
<td>4596.0000</td>
<td>2426.0000</td>
<td>46.0000</td>
<td>...</td>
<td>159.000000</td>
<td>72641.000000</td>
<td>3788.000000</td>
<td>220.000000</td>
<td>71496.000000</td>
<td>4644.000000</td>
<td>509.000000</td>
<td>69162.000000</td>
<td>6901.000000</td>
<td>586.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western_Proportion</th>
<td>2</td>
<td>Western</td>
<td>Province</td>
<td>Proportion</td>
<td>1</td>
<td>0.0027</td>
<td>0.3016</td>
<td>0.3340</td>
<td>0.1763</td>
<td>0.0033</td>
<td>...</td>
<td>0.002074</td>
<td>0.947710</td>
<td>0.049420</td>
<td>0.002870</td>
<td>0.932771</td>
<td>0.060588</td>
<td>0.006641</td>
<td>0.902321</td>
<td>0.090034</td>
<td>0.007645</td>
</tr>
</tbody>
</table>

<p>486 rows × 339 columns</p>
</div>
</div>
</div>
</section>
<section id="check-some-of-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="check-some-of-the-datasets">Check Some of the datasets</h2>
<p>necessary??</p>
<div id="cell-85" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>sol_geo.census</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="4" data-quarto-table-cell-role="th" data-halign="left">core</th>
<th data-quarto-table-cell-role="th">Key Statistics</th>
<th colspan="5" data-quarto-table-cell-role="th" data-halign="left">Main source of household drinking water</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Disability seeing</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability hearing</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability walking</th>
<th colspan="3" data-quarto-table-cell-role="th" data-halign="left">Disability remembering</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">location</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">Total Households</th>
<th data-quarto-table-cell-role="th">metered SIWA drinking water</th>
<th data-quarto-table-cell-role="th">communal standpipe</th>
<th data-quarto-table-cell-role="th">private water tank</th>
<th data-quarto-table-cell-role="th">communal water tank</th>
<th data-quarto-table-cell-role="th">well - protected</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
<th data-quarto-table-cell-role="th">No Difficulty at all</th>
<th data-quarto-table-cell-role="th">Some Difficulty</th>
<th data-quarto-table-cell-role="th">Cannot perform the task</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">pk</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Proportion</th>
<td>722</td>
<td>Aba - Asimeuru</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0000</td>
<td>0.5378</td>
<td>0.0245</td>
<td>0.0085</td>
<td>0.0011</td>
<td>...</td>
<td>0.003849</td>
<td>0.940843</td>
<td>0.054295</td>
<td>0.004862</td>
<td>0.880065</td>
<td>0.105754</td>
<td>0.014182</td>
<td>0.906807</td>
<td>0.081645</td>
<td>0.011548</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aba - Asimeuru_Total</th>
<td>722</td>
<td>Aba - Asimeuru</td>
<td>Ward</td>
<td>Total</td>
<td>939</td>
<td>0.0000</td>
<td>505.0000</td>
<td>23.0000</td>
<td>8.0000</td>
<td>1.0000</td>
<td>...</td>
<td>19.000000</td>
<td>4644.000000</td>
<td>268.000000</td>
<td>24.000000</td>
<td>4344.000000</td>
<td>522.000000</td>
<td>70.000000</td>
<td>4476.000000</td>
<td>403.000000</td>
<td>57.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aiaisi_Total</th>
<td>719</td>
<td>Aiaisi</td>
<td>Ward</td>
<td>Total</td>
<td>561</td>
<td>1.0000</td>
<td>403.0000</td>
<td>9.0000</td>
<td>3.0000</td>
<td>1.0000</td>
<td>...</td>
<td>9.000000</td>
<td>3415.000000</td>
<td>149.000000</td>
<td>10.000000</td>
<td>3316.000000</td>
<td>239.000000</td>
<td>19.000000</td>
<td>3349.000000</td>
<td>205.000000</td>
<td>20.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aiaisi_Proportion</th>
<td>719</td>
<td>Aiaisi</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0018</td>
<td>0.7184</td>
<td>0.0160</td>
<td>0.0053</td>
<td>0.0018</td>
<td>...</td>
<td>0.002518</td>
<td>0.955512</td>
<td>0.041690</td>
<td>0.002798</td>
<td>0.927812</td>
<td>0.066872</td>
<td>0.005316</td>
<td>0.937045</td>
<td>0.057359</td>
<td>0.005596</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aimela_Proportion</th>
<td>702</td>
<td>Aimela</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0164</td>
<td>0.2937</td>
<td>0.0762</td>
<td>0.1921</td>
<td>0.1360</td>
<td>...</td>
<td>0.001571</td>
<td>0.959288</td>
<td>0.038749</td>
<td>0.001964</td>
<td>0.954444</td>
<td>0.039796</td>
<td>0.005760</td>
<td>0.951172</td>
<td>0.043330</td>
<td>0.005498</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Te Nggano_Proportion</th>
<td>502</td>
<td>West Te Nggano</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0000</td>
<td>0.0000</td>
<td>0.3704</td>
<td>0.4568</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>0.978836</td>
<td>0.018519</td>
<td>0.002646</td>
<td>0.968254</td>
<td>0.031746</td>
<td>0.000000</td>
<td>0.986772</td>
<td>0.013228</td>
<td>0.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West Ulawa_Proportion</th>
<td>803</td>
<td>West Ulawa</td>
<td>Ward</td>
<td>Proportion</td>
<td>1</td>
<td>0.0099</td>
<td>0.7673</td>
<td>0.0050</td>
<td>0.0050</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>0.929070</td>
<td>0.069767</td>
<td>0.001163</td>
<td>0.886047</td>
<td>0.113953</td>
<td>0.000000</td>
<td>0.920930</td>
<td>0.077907</td>
<td>0.001163</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Ulawa_Total</th>
<td>803</td>
<td>West Ulawa</td>
<td>Ward</td>
<td>Total</td>
<td>202</td>
<td>2.0000</td>
<td>155.0000</td>
<td>1.0000</td>
<td>1.0000</td>
<td>0.0000</td>
<td>...</td>
<td>0.000000</td>
<td>799.000000</td>
<td>60.000000</td>
<td>1.000000</td>
<td>762.000000</td>
<td>98.000000</td>
<td>0.000000</td>
<td>792.000000</td>
<td>67.000000</td>
<td>1.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western_Total</th>
<td>2</td>
<td>Western</td>
<td>Province</td>
<td>Total</td>
<td>13762</td>
<td>37.0000</td>
<td>4151.0000</td>
<td>4596.0000</td>
<td>2426.0000</td>
<td>46.0000</td>
<td>...</td>
<td>159.000000</td>
<td>72641.000000</td>
<td>3788.000000</td>
<td>220.000000</td>
<td>71496.000000</td>
<td>4644.000000</td>
<td>509.000000</td>
<td>69162.000000</td>
<td>6901.000000</td>
<td>586.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western_Proportion</th>
<td>2</td>
<td>Western</td>
<td>Province</td>
<td>Proportion</td>
<td>1</td>
<td>0.0027</td>
<td>0.3016</td>
<td>0.3340</td>
<td>0.1763</td>
<td>0.0033</td>
<td>...</td>
<td>0.002074</td>
<td>0.947710</td>
<td>0.049420</td>
<td>0.002870</td>
<td>0.932771</td>
<td>0.060588</td>
<td>0.006641</td>
<td>0.902321</td>
<td>0.090034</td>
<td>0.007645</td>
</tr>
</tbody>
</table>

<p>486 rows × 339 columns</p>
</div>
</div>
</div>
<div id="cell-86" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>sol_geo.geo</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">agg</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">location</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">location</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aba - Asimeuru</th>
<td>MULTIPOLYGON (((161.54336 -9.54751, 161.54367 ...</td>
<td>722</td>
<td>Ward</td>
<td>2009</td>
<td>Aba - Asimeuru</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aiaisi</th>
<td>MULTIPOLYGON (((161.26900 -9.21229, 161.27144 ...</td>
<td>719</td>
<td>Ward</td>
<td>2009</td>
<td>Aiaisi</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Aimela</th>
<td>MULTIPOLYGON (((160.68653 -8.71158, 160.67020 ...</td>
<td>702</td>
<td>Ward</td>
<td>2009</td>
<td>Aimela</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Aola</th>
<td>MULTIPOLYGON (((160.50139 -9.52996, 160.50196 ...</td>
<td>616</td>
<td>Ward</td>
<td>2009</td>
<td>Aola</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Areare</th>
<td>MULTIPOLYGON (((161.35878 -9.46664, 161.35859 ...</td>
<td>720</td>
<td>Ward</td>
<td>2009</td>
<td>Areare</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Makira</th>
<td>MULTIPOLYGON (((161.50441 -10.51180, 161.50559...</td>
<td>844</td>
<td>Constituency</td>
<td>2009</td>
<td>West Makira</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West New Georgia-Vonavona</th>
<td>MULTIPOLYGON (((157.27598 -8.35143, 157.26991 ...</td>
<td>209</td>
<td>Constituency</td>
<td>2009</td>
<td>West New Georgia-Vonavona</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">West Te Nggano</th>
<td>MULTIPOLYGON (((160.35206 -11.66366, 160.30721...</td>
<td>502</td>
<td>Ward</td>
<td>2009</td>
<td>West Te Nggano</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">West Ulawa</th>
<td>MULTIPOLYGON (((161.97730 -9.77521, 161.94899 ...</td>
<td>803</td>
<td>Ward</td>
<td>2009</td>
<td>West Ulawa</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Western</th>
<td>MULTIPOLYGON (((158.25148 -8.78861, 158.24885 ...</td>
<td>2</td>
<td>Province</td>
<td>2009</td>
<td>Western</td>
</tr>
</tbody>
</table>

<p>243 rows × 5 columns</p>
</div>
</div>
</div>
<div id="cell-87" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> write testing that checks that different methods create equilvalent objects.</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> - need to write an equality object</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-88" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>test.loc[<span class="dv">2024</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Total</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">(core, location)</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Central</th>
<td>34359.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Choiseul</th>
<td>40226.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Guadalcanal</th>
<td>178238.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Honiara</th>
<td>97801.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Isabel</th>
<td>38134.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Makira-Ulawa</th>
<td>59705.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Malaita</th>
<td>165610.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rennell-Bell</th>
<td>4702.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Temotu</th>
<td>26182.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Western</th>
<td>105367.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-89" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(sol_geo.pop_years)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>16</code></pre>
</div>
</div>
<section id="test-that-the-election-data-exists" class="level3">
<h3 class="anchored" data-anchor-id="test-that-the-election-data-exists">Test that the election data Exists</h3>
<div id="cell-91" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>sol_geo.elec.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Total</th>
<th data-quarto-table-cell-role="th">Proportion</th>
<th data-quarto-table-cell-role="th">candParty</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Order</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Joseph Waleanisia</td>
<td>108</td>
<td>0.017</td>
<td>Joseph Waleanisia (UP)</td>
<td>UP</td>
<td>4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Obadiah Koti</td>
<td>257</td>
<td>0.039</td>
<td>Obadiah Koti (PLD)</td>
<td>PLD</td>
<td>3</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Talauburi Anisi</td>
<td>488</td>
<td>0.075</td>
<td>Talauburi Anisi (KAD)</td>
<td>KAD</td>
<td>2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>David Filia</td>
<td>1348</td>
<td>0.207</td>
<td>David Filia (OUR)</td>
<td>OUR</td>
<td>1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Cooper Wale</td>
<td>4314</td>
<td>0.662</td>
<td>Cooper Wale (SID)</td>
<td>SID</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-92" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>sol_geo.elec_wide.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Geo</th>
<th data-quarto-table-cell-role="th">loc_name</th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">Winning Party</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Auki-Langalanga</td>
<td>Cooper Wale (SID) - 4314 (66.2%)</td>
<td>David Filia (OUR) - 1348 (20.7%)</td>
<td>Talauburi Anisi (KAD) - 488 (7.5%)</td>
<td>SID</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Baegu-Asifola</td>
<td>Tagini Makario (OUR) - 2391 (37.4%)</td>
<td>Celsus Talifilu (U4C) - 2147 (33.6%)</td>
<td>Douglas Buga (SIP) - 1009 (15.8%)</td>
<td>OUR</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Central Guadalcanal</td>
<td>Shanel Agovaka (OUR) - 3454 (43.1%)</td>
<td>Manengelea Rex (IND) - 1592 (19.8%)</td>
<td>Denson Denni (KAD) - 1381 (17.2%)</td>
<td>OUR</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Central Honiara</td>
<td>Darcy Lilo (SIP) - 8223 (63.4%)</td>
<td>Alfred Efona (UP) - 3632 (28.0%)</td>
<td>Francis Idu (OUR) - 669 (5.2%)</td>
<td>SIP</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>National Parliament</td>
<td>2024</td>
<td>Constituency</td>
<td>Central Kwara'ae</td>
<td>Ricky Fuo'o (UP) - 5208 (47.9%)</td>
<td>Jackson Fiulaua (OUR) - 1831 (16.8%)</td>
<td>Young Wate (IND) - 1537 (14.1%)</td>
<td>UP</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/Gippers\.github\.io\/SolomonIslandsDataMap");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/Gippers/SolomonIslandsDataMap/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>