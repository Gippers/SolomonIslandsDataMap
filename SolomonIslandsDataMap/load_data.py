# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/01_gen_map.ipynb.

# %% auto 0
__all__ = ['SolomonGeo', 'SolomonCensus']

# %% ../nbs/01_gen_map.ipynb 2
from nbdev.showdoc import *
import geopandas as gp
import pandas as pd
from git import Repo

# %% ../nbs/01_gen_map.ipynb 5
class SolomonGeo:
    # TODO work out how to format this?
    # Look at nbdev docs maybe?
    '''
    Load the solomon islands geography data 
    Attributes:
        adm3    Geopandas dataframe containing admin 3 geographies.
    '''
    def __init__(self):
        repo = Repo('.', search_parent_directories=True)
        fp = str(repo.working_tree_dir) + "/testData/"
        self.adm3 = self.elt(fp)

    def elt(self, pw:str, # The pathway to the dataset
           )-> gp.GeoDataFrame: # The geojason dataset for given aggregation
        '''
        Load and transform given filepath into a geejason geopandas dataframe
        '''
        adm3 = gp.read_file('zip://' + pw + 'slb_admbnda_adm3.zip')
        adm3.to_file('myJson.geojson', driver='GeoJSON')
        # Need to set the index, currently using WID
        adm3 = adm3.set_index(adm3["SINSO_WID"].values)
        return adm3

# %% ../nbs/01_gen_map.ipynb 9
class SolomonCensus:
    '''
    Load the solomon islands census data 
    '''
    def __init__(self):
        repo = Repo('.', search_parent_directories=True)
        fp = str(repo.working_tree_dir) + "/testData/"
        self.data = self.elt(fp)

    def elt(self, pw:str, # The pathway to the dataset
           )-> pd.pandas: # Return the pandas dataset
        '''
        Load and transform data from filepath into pandas dataset
        '''
        df = pd.read_csv(fp + 'sol_census_2009_ward.csv')

        # TODO load all the files and merge them together?
        return df



